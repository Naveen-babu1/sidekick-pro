{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\r\n\r\nexport const api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport interface Repository {\r\n  path: string;\r\n  first_indexed: string;\r\n  last_updated: string;\r\n  commit_count: number;\r\n  selected?: boolean;\r\n  branch_count?: number;\r\n  branch_stats?: {\r\n    main_commits: number;\r\n    feature_commits: number;\r\n    total_branches: number;\r\n    active_branches: number;\r\n  };\r\n}\r\nexport interface Branch {\r\n  name: string;\r\n  commit_count: number;\r\n  last_commit_date: string;\r\n  branch_type: 'main' | 'develop' | 'feature' | 'hotfix' | 'release' | 'other';\r\n}\r\n\r\nexport interface QueryResponse {\r\n  answer: string;\r\n  sources: Source[];\r\n  confidence: number;\r\n}\r\n\r\nexport interface Source {\r\n  type: string;\r\n  content: string;\r\n  timestamp: string;\r\n  author: string;\r\n  commit: string;\r\n  repository: string;\r\n  files_changed: string[];\r\n  primary_branch?: string;\r\n  all_branches?: string[];\r\n  merge_commit?: boolean;\r\n  branch_context?: {\r\n    branch_type: string;\r\n    is_main_branch: boolean;\r\n    is_feature_branch: boolean;\r\n  };\r\n}\r\n\r\nexport const contextKeeperAPI = {\r\n  // Queries\r\n  query: async (query: string, repository?: string, limit: number = 10): Promise<QueryResponse> => {\r\n    const { data } = await api.post('/api/query', { query, repository, limit });\r\n    return data;\r\n  },\r\n\r\n  queryWithBranches: async (\r\n    query: string, \r\n    repository?: string, \r\n    branches?: string[], \r\n    limit: number = 10\r\n  ): Promise<QueryResponse> => {\r\n    const { data } = await api.post('/api/query', { \r\n      query, \r\n      repository, \r\n      branches: branches && branches.length > 0 ? branches : undefined,\r\n      limit \r\n    });\r\n    return data;\r\n  },\r\n\r\n\r\n  // Repositories\r\n  getRepositories: async () => {\r\n    const { data } = await api.get('/api/repositories');\r\n    return data;\r\n  },\r\n\r\n  getRepositoryBranches: async (repoPath: string): Promise<{ repository: string; branches: Branch[]; total_branches: number }> => {\r\n    const { data } = await api.get(`/api/repositories/${encodeURIComponent(repoPath)}/branches`);\r\n    return data;\r\n  },\r\n\r\n  // Stats\r\n  getStats: async () => {\r\n    const { data } = await api.get('/api/stats');\r\n    return data;\r\n  },\r\n\r\n  // Health\r\n  getHealth: async () => {\r\n    const { data } = await api.get('/health');\r\n    return data;\r\n  },\r\n\r\n  // Ingestion\r\n  startIngestion: async (repoPath: string) => {\r\n    const { data } = await api.post('/api/ingest/start', { repo_path: repoPath });\r\n    return data;\r\n  },\r\n\r\n  startMultiBranchIngestion: async (\r\n    repoPath: string, \r\n    options: {\r\n      branches?: string[];\r\n      allBranches?: boolean;\r\n      activeBranches?: boolean;\r\n      days?: number;\r\n    } = {}\r\n  ) => {\r\n    const { data } = await api.post('/api/ingest/multi-branch', {\r\n      repo_path: repoPath,\r\n      ...options\r\n    });\r\n    return data;\r\n  },\r\n\r\n  getIngestionStatus: async () => {\r\n    const { data } = await api.get('/api/ingest/status');\r\n    return data;\r\n  },\r\n\r\n  // Commit Analysis\r\n  getCommitDetails: async (commitHash: string) => {\r\n    const { data } = await api.get(`/api/commits/${commitHash}`);\r\n    return data;\r\n  },\r\n\r\n  compareCommits: async (commit1: string, commit2: string) => {\r\n    const { data } = await api.post('/api/commits/compare', {\r\n      commit_1: commit1,\r\n      commit_2: commit2\r\n    });\r\n    return data;\r\n  },\r\n\r\n  // Branch Analysis\r\n  analyzeBranchActivity: async (repository: string, branches?: string[]) => {\r\n    const { data } = await api.post('/api/analyze/branches', {\r\n      repository,\r\n      branches\r\n    });\r\n    return data;\r\n  },\r\n};"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE5C,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AA+CO,MAAM,mBAAmB;IAC9B,UAAU;IACV,OAAO,OAAO,OAAe,YAAqB,QAAgB,EAAE;QAClE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,cAAc;YAAE;YAAO;YAAY;QAAM;QACzE,OAAO;IACT;IAEA,mBAAmB,OACjB,OACA,YACA,UACA,QAAgB,EAAE;QAElB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,cAAc;YAC5C;YACA;YACA,UAAU,YAAY,SAAS,MAAM,GAAG,IAAI,WAAW;YACvD;QACF;QACA,OAAO;IACT;IAGA,eAAe;IACf,iBAAiB;QACf,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO;IACT;IAEA,uBAAuB,OAAO;QAC5B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC,CAAC,kBAAkB,EAAE,mBAAmB,UAAU,SAAS,CAAC;QAC3F,OAAO;IACT;IAEA,QAAQ;IACR,UAAU;QACR,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO;IACT;IAEA,SAAS;IACT,WAAW;QACT,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO;IACT;IAEA,YAAY;IACZ,gBAAgB,OAAO;QACrB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,qBAAqB;YAAE,WAAW;QAAS;QAC3E,OAAO;IACT;IAEA,2BAA2B,OACzB,UACA,UAKI,CAAC,CAAC;QAEN,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,4BAA4B;YAC1D,WAAW;YACX,GAAG,OAAO;QACZ;QACA,OAAO;IACT;IAEA,oBAAoB;QAClB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO;IACT;IAEA,kBAAkB;IAClB,kBAAkB,OAAO;QACvB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAC,CAAC,aAAa,EAAE,YAAY;QAC3D,OAAO;IACT;IAEA,gBAAgB,OAAO,SAAiB;QACtC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,wBAAwB;YACtD,UAAU;YACV,UAAU;QACZ;QACA,OAAO;IACT;IAEA,kBAAkB;IAClB,uBAAuB,OAAO,YAAoB;QAChD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,yBAAyB;YACvD;YACA;QACF;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/components/QueryResults.tsx"],"sourcesContent":["'use client'\r\nimport { useState } from 'react'\r\nimport { QueryResponse } from '../lib/api'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport { GitBranch, User, Calendar, FileText, GitMerge, ExternalLink, ChevronDown } from 'lucide-react'\r\nimport { sources } from 'next/dist/compiled/webpack/webpack'\r\n\r\ninterface QueryResultsProps {\r\n  data: QueryResponse\r\n}\r\n\r\nexport function QueryResults({ data }: QueryResultsProps) {\r\n  const [expandedCommit, setExpandedCommit] = useState<string | null>(null);\r\n\r\n  const getBranchColor = (branchType?: string) => {\r\n    const colors = {\r\n      main: 'text-green-400 bg-green-400/20 border-green-400/30',\r\n      develop: 'text-blue-400 bg-blue-400/20 border-blue-400/30',\r\n      feature: 'text-purple-400 bg-purple-400/20 border-purple-400/30',\r\n      hotfix: 'text-red-400 bg-red-400/20 border-red-400/30',\r\n      release: 'text-orange-400 bg-orange-400/20 border-orange-400/30',\r\n      other: 'text-gray-400 bg-gray-400/20 border-gray-400/30'\r\n    };\r\n    return colors[branchType as keyof typeof colors] || colors.other;\r\n  };\r\n\r\n  const formatTimeAgo = (timestamp: string) => {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diffTime = Math.abs(now.getTime() - date.getTime());\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;\r\n    return `${Math.ceil(diffDays / 30)} months ago`;\r\n  };\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* AI Analysis */}\r\n      <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <span>ðŸ¤–</span> AI Analysis\r\n          </h3>\r\n          <div className=\"flex items-center gap-2 text-sm\">\r\n            <span className=\"text-gray-400\">Confidence:</span>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-24 h-2 bg-gray-700 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full bg-emerald-500 transition-all\"\r\n                  style={{ width: `${(data.confidence || 0) * 100}%` }}\r\n                />\r\n              </div>\r\n              <span className=\"text-emerald-400 font-medium\">\r\n                {Math.round((data.confidence || 0) * 100)}%\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"prose prose-invert max-w-none\">\r\n          <div className=\"text-gray-300 leading-relaxed\">\r\n            <ReactMarkdown\r\n              components={{\r\n                h1: ({children}) => <h1 className=\"text-xl font-bold text-gray-100 mb-3\">{children}</h1>,\r\n                h2: ({children}) => <h2 className=\"text-lg font-semibold text-gray-200 mb-2 mt-4\">{children}</h2>,\r\n                strong: ({children}) => <strong className=\"text-gray-100 font-semibold\">{children}</strong>,\r\n                code: ({children}) => <code className=\"bg-gray-800/50 px-1.5 py-0.5 rounded text-emerald-400 text-sm font-mono\">{children}</code>,\r\n                li: ({children}) => <li className=\"mb-1\">{children}</li>\r\n              }}\r\n            >\r\n              {data.answer}\r\n            </ReactMarkdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Sources */}\r\n      {data.sources && data.sources.length > 0 && (\r\n        <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n            <FileText className=\"w-5 h-5 text-gray-400\" />\r\n            Sources ({data.sources.length} commits)\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {data.sources.map((source, index) => (\r\n              <div\r\n                key={`${source.commit}-${index}`}\r\n                className=\"bg-gray-800/30 border border-gray-700/50 rounded-xl p-4 hover:bg-gray-800/50 transition-all\"\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    {/* Commit Header */}\r\n                    <div className=\"flex items-center gap-2 mb-3 flex-wrap\">\r\n                      <span className=\"font-mono text-sm bg-gray-700/50 px-2 py-1 rounded text-emerald-400\">\r\n                        {source.commit}\r\n                      </span>\r\n                      \r\n                      {/* Branch indicators */}\r\n                      {source.primary_branch && (\r\n                        <div className={`px-2 py-1 text-xs rounded border ${getBranchColor(source.branch_context?.branch_type || 'main')}`}>\r\n                          {source.primary_branch}\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {source.merge_commit && (\r\n                        <div className=\"flex items-center gap-1 text-xs text-purple-400 bg-purple-400/20 px-2 py-1 rounded border border-purple-400/30\">\r\n                          <GitMerge className=\"w-3 h-3\" />\r\n                          Merge\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Commit Message */}\r\n                    <p className=\"text-gray-300 mb-3 leading-relaxed\">\r\n                      {source.content}\r\n                    </p>\r\n\r\n                    {/* Metadata Row */}\r\n                    <div className=\"flex items-center gap-4 text-sm text-gray-400 mb-2\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <User className=\"w-4 h-4\" />\r\n                        <span>{source.author.split('<')[0].trim()}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Calendar className=\"w-4 h-4\" />\r\n                        <span>{formatTimeAgo(source.timestamp)}</span>\r\n                      </div>\r\n                      {source.files_changed && source.files_changed.length > 0 && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <FileText className=\"w-4 h-4\" />\r\n                          <span>{source.files_changed.length} files</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* All Branches (if multiple) */}\r\n                    {source.all_branches && source.all_branches.length > 1 && (\r\n                      <div className=\"flex items-center gap-2 mb-3\">\r\n                        <GitBranch className=\"w-4 h-4 text-gray-400\" />\r\n                        <span className=\"text-xs text-gray-400\">Also in:</span>\r\n                        <div className=\"flex gap-1 flex-wrap\">\r\n                          {source.all_branches\r\n                            .filter(branch => branch !== source.primary_branch)\r\n                            .slice(0, 3)\r\n                            .map(branch => (\r\n                              <span\r\n                                key={branch}\r\n                                className=\"px-1.5 py-0.5 text-xs bg-gray-600/30 text-gray-400 rounded\"\r\n                              >\r\n                                {branch}\r\n                              </span>\r\n                            ))}\r\n                          {source.all_branches.length > 4 && (\r\n                            <span className=\"px-1.5 py-0.5 text-xs bg-gray-600/30 text-gray-400 rounded\">\r\n                              +{source.all_branches.length - 4}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Expandable Files List */}\r\n                    {source.files_changed && source.files_changed.length > 0 && (\r\n                      <div>\r\n                        <button\r\n                          onClick={() => setExpandedCommit(\r\n                            expandedCommit === source.commit ? null : source.commit\r\n                          )}\r\n                          className=\"flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 transition-colors\"\r\n                        >\r\n                          <ChevronDown className={`w-3 h-3 transition-transform ${\r\n                            expandedCommit === source.commit ? 'rotate-180' : ''\r\n                          }`} />\r\n                          {expandedCommit === source.commit ? 'Hide' : 'Show'} files ({source.files_changed.length})\r\n                        </button>\r\n                        \r\n                        {expandedCommit === source.commit && (\r\n                          <div className=\"mt-2 space-y-1 max-h-32 overflow-y-auto\">\r\n                            {source.files_changed.map((file, idx) => (\r\n                              <div\r\n                                key={idx}\r\n                                className=\"text-xs text-gray-400 font-mono bg-gray-700/30 px-2 py-1 rounded\"\r\n                              >\r\n                                {file}\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Action Button */}\r\n                  <button\r\n                    onClick={() => {\r\n                      console.log('View commit details:', source.commit);\r\n                    }}\r\n                    className=\"p-2 text-gray-400 hover:text-gray-300 transition-colors flex-shrink-0\"\r\n                    title=\"View detailed commit analysis\"\r\n                  >\r\n                    <ExternalLink className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAWO,SAAS,aAAa,EAAE,IAAI,EAAqB;IACtD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IAEpE,MAAM,iBAAiB,CAAC;QACtB,MAAM,SAAS;YACb,MAAM;YACN,SAAS;YACT,SAAS;YACT,QAAQ;YACR,SAAS;YACT,OAAO;QACT;QACA,OAAO,MAAM,CAAC,WAAkC,IAAI,OAAO,KAAK;IAClE;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,WAAW,KAAK,GAAG,CAAC,IAAI,OAAO,KAAK,KAAK,OAAO;QACtD,MAAM,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;QAE1D,IAAI,aAAa,GAAG,OAAO;QAC3B,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,SAAS,CAAC;QAC/C,IAAI,WAAW,IAAI,OAAO,GAAG,KAAK,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAChE,OAAO,GAAG,KAAK,IAAI,CAAC,WAAW,IAAI,WAAW,CAAC;IACjD;IACA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;kDAAK;;;;;;oCAAS;;;;;;;0CAEjB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,CAAC,KAAK,UAAU,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC;oDAAC;;;;;;;;;;;0DAGvD,8OAAC;gDAAK,WAAU;;oDACb,KAAK,KAAK,CAAC,CAAC,KAAK,UAAU,IAAI,CAAC,IAAI;oDAAK;;;;;;;;;;;;;;;;;;;;;;;;;kCAMlD,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,mMAAa;gCACZ,YAAY;oCACV,IAAI,CAAC,EAAC,QAAQ,EAAC,iBAAK,8OAAC;4CAAG,WAAU;sDAAwC;;;;;;oCAC1E,IAAI,CAAC,EAAC,QAAQ,EAAC,iBAAK,8OAAC;4CAAG,WAAU;sDAAiD;;;;;;oCACnF,QAAQ,CAAC,EAAC,QAAQ,EAAC,iBAAK,8OAAC;4CAAO,WAAU;sDAA+B;;;;;;oCACzE,MAAM,CAAC,EAAC,QAAQ,EAAC,iBAAK,8OAAC;4CAAK,WAAU;sDAA2E;;;;;;oCACjH,IAAI,CAAC,EAAC,QAAQ,EAAC,iBAAK,8OAAC;4CAAG,WAAU;sDAAQ;;;;;;gCAC5C;0CAEC,KAAK,MAAM;;;;;;;;;;;;;;;;;;;;;;YAOnB,KAAK,OAAO,IAAI,KAAK,OAAO,CAAC,MAAM,GAAG,mBACrC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,0NAAQ;gCAAC,WAAU;;;;;;4BAA0B;4BACpC,KAAK,OAAO,CAAC,MAAM;4BAAC;;;;;;;kCAGhC,8OAAC;wBAAI,WAAU;kCACZ,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,sBACzB,8OAAC;gCAEC,WAAU;0CAEV,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DAEb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAK,WAAU;sEACb,OAAO,MAAM;;;;;;wDAIf,OAAO,cAAc,kBACpB,8OAAC;4DAAI,WAAW,CAAC,iCAAiC,EAAE,eAAe,OAAO,cAAc,EAAE,eAAe,SAAS;sEAC/G,OAAO,cAAc;;;;;;wDAIzB,OAAO,YAAY,kBAClB,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,0NAAQ;oEAAC,WAAU;;;;;;gEAAY;;;;;;;;;;;;;8DAOtC,8OAAC;oDAAE,WAAU;8DACV,OAAO,OAAO;;;;;;8DAIjB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,0MAAI;oEAAC,WAAU;;;;;;8EAChB,8OAAC;8EAAM,OAAO,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;;;;;;;;;;;;sEAEzC,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,sNAAQ;oEAAC,WAAU;;;;;;8EACpB,8OAAC;8EAAM,cAAc,OAAO,SAAS;;;;;;;;;;;;wDAEtC,OAAO,aAAa,IAAI,OAAO,aAAa,CAAC,MAAM,GAAG,mBACrD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,0NAAQ;oEAAC,WAAU;;;;;;8EACpB,8OAAC;;wEAAM,OAAO,aAAa,CAAC,MAAM;wEAAC;;;;;;;;;;;;;;;;;;;gDAMxC,OAAO,YAAY,IAAI,OAAO,YAAY,CAAC,MAAM,GAAG,mBACnD,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,6NAAS;4DAAC,WAAU;;;;;;sEACrB,8OAAC;4DAAK,WAAU;sEAAwB;;;;;;sEACxC,8OAAC;4DAAI,WAAU;;gEACZ,OAAO,YAAY,CACjB,MAAM,CAAC,CAAA,SAAU,WAAW,OAAO,cAAc,EACjD,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAA,uBACH,8OAAC;wEAEC,WAAU;kFAET;uEAHI;;;;;gEAMV,OAAO,YAAY,CAAC,MAAM,GAAG,mBAC5B,8OAAC;oEAAK,WAAU;;wEAA6D;wEACzE,OAAO,YAAY,CAAC,MAAM,GAAG;;;;;;;;;;;;;;;;;;;gDAQxC,OAAO,aAAa,IAAI,OAAO,aAAa,CAAC,MAAM,GAAG,mBACrD,8OAAC;;sEACC,8OAAC;4DACC,SAAS,IAAM,kBACb,mBAAmB,OAAO,MAAM,GAAG,OAAO,OAAO,MAAM;4DAEzD,WAAU;;8EAEV,8OAAC,mOAAW;oEAAC,WAAW,CAAC,6BAA6B,EACpD,mBAAmB,OAAO,MAAM,GAAG,eAAe,IAClD;;;;;;gEACD,mBAAmB,OAAO,MAAM,GAAG,SAAS;gEAAO;gEAAS,OAAO,aAAa,CAAC,MAAM;gEAAC;;;;;;;wDAG1F,mBAAmB,OAAO,MAAM,kBAC/B,8OAAC;4DAAI,WAAU;sEACZ,OAAO,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,oBAC/B,8OAAC;oEAEC,WAAU;8EAET;mEAHI;;;;;;;;;;;;;;;;;;;;;;sDAanB,8OAAC;4CACC,SAAS;gDACP,QAAQ,GAAG,CAAC,wBAAwB,OAAO,MAAM;4CACnD;4CACA,WAAU;4CACV,OAAM;sDAEN,cAAA,8OAAC,sOAAY;gDAAC,WAAU;;;;;;;;;;;;;;;;;+BAlHvB,GAAG,OAAO,MAAM,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;AA4HhD","debugId":null}},
    {"offset": {"line": 736, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/components/AddRepositoryModal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { X } from 'lucide-react'\r\n\r\ninterface AddRepositoryModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onAdd: (path: string) => Promise<void>\r\n}\r\n\r\nexport function AddRepositoryModal({ isOpen, onClose, onAdd }: AddRepositoryModalProps) {\r\n  const [repoPath, setRepoPath] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  const handleSubmit = async () => {\r\n    if (!repoPath.trim()) {\r\n      setError('Please enter a repository path')\r\n      return\r\n    }\r\n\r\n    setIsLoading(true)\r\n    setError('')\r\n    \r\n    try {\r\n      await onAdd(repoPath)\r\n      setRepoPath('')\r\n      onClose()\r\n    } catch (err: any) {\r\n      setError(err.message || 'Failed to add repository')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"relative bg-gray-900 border border-gray-700 rounded-2xl p-6 w-full max-w-md shadow-2xl\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        <h3 className=\"text-xl font-semibold mb-2\">Add Repository</h3>\r\n        <p className=\"text-gray-400 text-sm mb-6\">\r\n          Enter the full path to your local repository\r\n        </p>\r\n\r\n        <input\r\n          type=\"text\"\r\n          value={repoPath}\r\n          onChange={(e) => setRepoPath(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && handleSubmit()}\r\n          placeholder=\"e.g., D:/projects/my-repo\"\r\n          className=\"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:border-emerald-500 focus:outline-none transition-colors\"\r\n          autoFocus\r\n        />\r\n\r\n        {error && (\r\n          <p className=\"mt-2 text-red-400 text-sm\">{error}</p>\r\n        )}\r\n\r\n        <div className=\"flex gap-3 mt-6\">\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isLoading}\r\n            className=\"flex-1 px-4 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            {isLoading ? 'Adding...' : 'Add Repository'}\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mt-4 p-3 bg-gray-800/50 rounded-lg\">\r\n          <p className=\"text-xs text-gray-400\">\r\n            ðŸ’¡ Tip: Make sure the repository has been initialized with git\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWO,SAAS,mBAAmB,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAA2B;IACpF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe;QACnB,IAAI,CAAC,SAAS,IAAI,IAAI;YACpB,SAAS;YACT;QACF;QAEA,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,MAAM;YACZ,YAAY;YACZ;QACF,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAIX,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,iMAAC;4BAAC,WAAU;;;;;;;;;;;kCAGf,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAI1C,8OAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;wBACvC,aAAY;wBACZ,WAAU;wBACV,SAAS;;;;;;oBAGV,uBACC,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAG5C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;0CAET,YAAY,cAAc;;;;;;0CAE7B,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;kCAKH,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;;AAO/C","debugId":null}},
    {"offset": {"line": 895, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/components/DeleteConfirmationModal.tsx"],"sourcesContent":["// Create this as components/DeleteConfirmationModal.tsx\r\n\r\nimport { X, AlertTriangle } from \"lucide-react\";\r\n\r\ninterface DeleteConfirmationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  repositoryName: string;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport function DeleteConfirmationModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  repositoryName,\r\n  isLoading = false,\r\n}: DeleteConfirmationModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-gray-900 border border-gray-800 rounded-xl max-w-md w-full p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-red-500/20 rounded-lg\">\r\n              <AlertTriangle className=\"w-5 h-5 text-red-400\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-gray-100\">\r\n              Delete Repository\r\n            </h3>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-300 transition-colors\"\r\n            disabled={isLoading}\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-6\">\r\n          <p className=\"text-gray-300 mb-3\">\r\n            Are you sure you want to delete the repository:\r\n          </p>\r\n          <div className=\"bg-gray-800/50 border border-gray-700 rounded-lg p-3\">\r\n            <code className=\"text-emerald-400 text-sm break-all\">\r\n              {repositoryName}\r\n            </code>\r\n          </div>\r\n          <p className=\"text-red-400 text-sm mt-3 font-medium\">\r\n            This will permanently delete the repository and all its indexed commits.\r\n            This action cannot be undone.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors border border-gray-700\"\r\n            disabled={isLoading}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={onConfirm}\r\n            className=\"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50\"\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? \"Deleting...\" : \"Delete\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,wDAAwD;;;;;;AAExD;AAAA;;;AAUO,SAAS,wBAAwB,EACtC,MAAM,EACN,OAAO,EACP,SAAS,EACT,cAAc,EACd,YAAY,KAAK,EACY;IAC7B,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,8OAAC;oCAAG,WAAU;8CAAsC;;;;;;;;;;;;sCAItD,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIjB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAGlC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;0CACb;;;;;;;;;;;sCAGL,8OAAC;4BAAE,WAAU;sCAAwC;;;;;;;;;;;;8BAMvD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCAET,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAMzC","debugId":null}},
    {"offset": {"line": 1053, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/components/RepositoryList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { Plus, GitBranch, Trash2, RefreshCw } from \"lucide-react\";\r\nimport { api, contextKeeperAPI } from \"../lib/api\";\r\nimport { AddRepositoryModal } from \"./AddRepositoryModal\";\r\nimport { DeleteConfirmationModal } from \"./DeleteConfirmationModal\";\r\n\r\ninterface RepositoryListProps {\r\n  selectedRepo: string | null;\r\n  onSelectRepo: (repo: string | null) => void;\r\n}\r\n\r\nexport function RepositoryList({\r\n  selectedRepo,\r\n  onSelectRepo,\r\n}: RepositoryListProps) {\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [repositoryToDelete, setRepositoryToDelete] = useState<string | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data, isLoading, refetch } = useQuery({\r\n    queryKey: [\"repositories\"],\r\n    queryFn: contextKeeperAPI.getRepositories,\r\n  });\r\n\r\n  const handleAddRepository = async (repoPath: string) => {\r\n    await contextKeeperAPI.startIngestion(repoPath);\r\n    setTimeout(() => {\r\n      refetch();\r\n      queryClient.invalidateQueries({ queryKey: [\"stats\"] });\r\n    }, 2000);\r\n  };\r\n\r\n  const handleDeleteClick = (repoPath: string) => {\r\n    setRepositoryToDelete(repoPath);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!repositoryToDelete) return;\r\n    \r\n    setIsDeleting(true);\r\n    try {\r\n      await api.delete(`/api/repositories/${encodeURIComponent(repositoryToDelete)}`);\r\n      refetch();\r\n      queryClient.invalidateQueries({ queryKey: [\"stats\"] });\r\n      \r\n      if (selectedRepo === repositoryToDelete) {\r\n        onSelectRepo(null);\r\n      }\r\n      \r\n      // Close modal and reset state\r\n      setShowDeleteModal(false);\r\n      setRepositoryToDelete(null);\r\n    } catch (error) {\r\n      console.error(\"Failed to delete repository:\", error);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setShowDeleteModal(false);\r\n    setRepositoryToDelete(null);\r\n  };\r\n\r\n  const handleClearAll = async () => {\r\n    if (\r\n      confirm(\r\n        \"Clear all repositories? This will remove tracking but keep indexed data.\"\r\n      )\r\n    ) {\r\n      try {\r\n        await api.delete(\"/api/repositories/clear\");\r\n        refetch();\r\n        onSelectRepo(null);\r\n      } catch (error) {\r\n        console.error(\"Failed to clear repositories:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const repositories = data?.repositories || {};\r\n\r\n  // Filter out duplicates based on path\r\n  const uniqueRepos = Object.entries(repositories).reduce(\r\n    (acc, [path, repo]) => {\r\n      const repoName = path.split(/[/\\\\]/).pop() || path;\r\n      const existing = acc.find(([_, r]: any) => r.path === path);\r\n      if (!existing || (repo as any).commit_count > 0) {\r\n        acc.push([path, repo]);\r\n      }\r\n      return acc;\r\n    },\r\n    [] as Array<[string, any]>\r\n  );\r\n\r\n  const handleCleanup = async () => {\r\n    try {\r\n      const response = await api.post(\"/api/repositories/cleanup\");\r\n      const data = response.data;\r\n\r\n      // Refresh stats after cleanup\r\n      queryClient.invalidateQueries({ queryKey: [\"stats\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"repositories\"] });\r\n\r\n      // alert(`Cleanup complete: ${data.message}`);\r\n    } catch (error) {\r\n      console.error(\"Cleanup failed:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <GitBranch className=\"w-5 h-5 text-emerald-400\" />\r\n            Repositories\r\n          </h3>\r\n          <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={handleCleanup}\r\n            className=\"text-gray-400 hover:text-emerald-400 transition-colors\"\r\n            title=\"Clean up orphaned data\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            onClick={handleClearAll}\r\n            className=\"text-gray-400 hover:text-red-400 transition-colors\"\r\n            title=\"Clear all repositories\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </button>\r\n          </div>\r\n          {/* <button\r\n            onClick={handleClearAll}\r\n            className=\"text-gray-400 hover:text-red-400 transition-colors\"\r\n            title=\"Clear all repositories\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </button> */}\r\n        </div>\r\n\r\n        <div className=\"space-y-2 mb-4 max-h-96 overflow-y-auto\">\r\n          {uniqueRepos.map(([path, repo]) => {\r\n            const repoName = path.split(/[/\\\\]/).pop() || path;\r\n            const isSelected = selectedRepo === path;\r\n            const commitCount = repo.commit_count || 0;\r\n\r\n            // Skip repos with 0 commits that are duplicates\r\n            if (\r\n              commitCount === 0 &&\r\n              uniqueRepos.some(\r\n                ([p, r]) =>\r\n                  p !== path && p.includes(repoName) && r.commit_count > 0\r\n              )\r\n            ) {\r\n              return null;\r\n            }\r\n\r\n            return (\r\n              <div\r\n                key={path}\r\n                className={`group flex items-center justify-between p-3 rounded-xl transition-all ${\r\n                  isSelected\r\n                    ? \"bg-emerald-500/20 border border-emerald-500/50\"\r\n                    : \"bg-gray-800/30 hover:bg-gray-800/50 border border-gray-700\"\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <button\r\n                    onClick={() => onSelectRepo(isSelected ? null : path)}\r\n                    className=\"flex-1 text-left\"\r\n                  >\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <div\r\n                        className={`font-medium ${\r\n                          isSelected ? \"text-emerald-400\" : \"text-gray-300\"\r\n                        }`}\r\n                      >\r\n                        {repoName}\r\n                      </div>\r\n                      {repo.branch_count && repo.branch_count > 1 && (\r\n                        <span className=\"px-2 py-1 text-xs bg-blue-500/20 text-blue-400 rounded\">\r\n                          {repo.branch_count} branches\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    <div className=\"grid grid-cols-2 gap-2 text-xs text-gray-400\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <span>{commitCount} commits</span>\r\n                      </div>\r\n                      {repo.last_updated && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <span>{new Date(repo.last_updated).toLocaleDateString()}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Branch breakdown if available */}\r\n                    {repo.branch_stats && (\r\n                      <div className=\"mt-2 flex gap-2 text-xs\">\r\n                        {repo.branch_stats.main_commits > 0 && (\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\r\n                            <span className=\"text-gray-400\">Main: {repo.branch_stats.main_commits}</span>\r\n                          </div>\r\n                        )}\r\n                        {repo.branch_stats.feature_commits > 0 && (\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <div className=\"w-2 h-2 bg-purple-400 rounded-full\"></div>\r\n                            <span className=\"text-gray-400\">Features: {repo.branch_stats.feature_commits}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => handleDeleteClick(path)}\r\n                    className=\"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-400 transition-all\"\r\n                    disabled={isDeleting}\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => setShowAddModal(true)}\r\n          className=\"w-full px-4 py-3 bg-gray-800/50 hover:bg-gray-800/70 border border-gray-700 text-gray-300 rounded-xl font-medium transition-all flex items-center justify-center gap-2\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          Add Repository\r\n        </button>\r\n      </div>\r\n\r\n      <AddRepositoryModal\r\n        isOpen={showAddModal}\r\n        onClose={() => setShowAddModal(false)}\r\n        onAdd={handleAddRepository}\r\n      />\r\n\r\n      <DeleteConfirmationModal\r\n        isOpen={showDeleteModal}\r\n        onClose={handleDeleteCancel}\r\n        onConfirm={handleDeleteConfirm}\r\n        repositoryName={repositoryToDelete?.split(/[/\\\\]/).pop() || \"\"}\r\n        isLoading={isDeleting}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1486, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/components/BranchSelector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { GitBranch, X, Filter } from \"lucide-react\";\r\nimport { api } from \"../lib/api\";\r\n\r\ninterface Branch {\r\n  name: string;\r\n  commit_count: number;\r\n  last_commit_date: string;\r\n  branch_type: 'main' | 'develop' | 'feature' | 'hotfix' | 'release' | 'other';\r\n}\r\n\r\ninterface BranchSelectorProps {\r\n  selectedRepository: string | null;\r\n  selectedBranches: string[];\r\n  onBranchesChange: (branches: string[]) => void;\r\n}\r\n\r\nexport function BranchSelector({ \r\n  selectedRepository, \r\n  selectedBranches, \r\n  onBranchesChange \r\n}: BranchSelectorProps) {\r\n  const [branches, setBranches] = useState<Branch[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showAll, setShowAll] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedRepository) {\r\n      loadBranches();\r\n    } else {\r\n      setBranches([]);\r\n      onBranchesChange([]);\r\n    }\r\n  }, [selectedRepository]);\r\n\r\n  const loadBranches = async () => {\r\n    if (!selectedRepository) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get(`/api/repositories/${encodeURIComponent(selectedRepository)}/branches`);\r\n      setBranches(response.data.branches || []);\r\n    } catch (error) {\r\n      console.error('Failed to load branches:', error);\r\n      // Fallback - show basic branch options\r\n      setBranches([\r\n        { name: 'main', commit_count: 0, last_commit_date: '', branch_type: 'main' },\r\n        { name: 'develop', commit_count: 0, last_commit_date: '', branch_type: 'develop' }\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getBranchColor = (type: string) => {\r\n    const colors = {\r\n      main: 'text-green-400 bg-green-400/20 border-green-400/30',\r\n      develop: 'text-blue-400 bg-blue-400/20 border-blue-400/30',\r\n      feature: 'text-purple-400 bg-purple-400/20 border-purple-400/30',\r\n      hotfix: 'text-red-400 bg-red-400/20 border-red-400/30',\r\n      release: 'text-orange-400 bg-orange-400/20 border-orange-400/30',\r\n      other: 'text-gray-400 bg-gray-400/20 border-gray-400/30'\r\n    };\r\n    return colors[type as keyof typeof colors] || colors.other;\r\n  };\r\n\r\n  const toggleBranch = (branchName: string) => {\r\n    const newSelection = selectedBranches.includes(branchName)\r\n      ? selectedBranches.filter(b => b !== branchName)\r\n      : [...selectedBranches, branchName];\r\n    \r\n    onBranchesChange(newSelection);\r\n  };\r\n\r\n  const clearSelection = () => {\r\n    onBranchesChange([]);\r\n  };\r\n\r\n  const selectMainBranches = () => {\r\n    const mainBranches = branches\r\n      .filter(b => ['main', 'develop'].includes(b.branch_type))\r\n      .map(b => b.name);\r\n    onBranchesChange(mainBranches);\r\n  };\r\n\r\n  if (!selectedRepository) {\r\n    return (\r\n      <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n        <div className=\"text-center text-gray-500 py-4\">\r\n          <GitBranch className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n          <p>Select a repository to view branches</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const displayedBranches = showAll ? branches : branches.slice(0, 8);\r\n\r\n  return (\r\n    <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n          <GitBranch className=\"w-5 h-5 text-blue-400\" />\r\n          Branches\r\n        </h3>\r\n        <div className=\"flex gap-2 text-sm\">\r\n          <button\r\n            onClick={selectMainBranches}\r\n            className=\"text-blue-400 hover:text-blue-300 transition-colors\"\r\n          >\r\n            Main\r\n          </button>\r\n          <button\r\n            onClick={clearSelection}\r\n            className=\"text-gray-400 hover:text-gray-300 transition-colors\"\r\n          >\r\n            Clear\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected branches summary */}\r\n      {selectedBranches.length > 0 && (\r\n        <div className=\"mb-4 p-3 bg-gray-800/30 rounded-lg border border-gray-700\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-400\">\r\n              {selectedBranches.length} branch(es) selected\r\n            </span>\r\n            <button\r\n              onClick={clearSelection}\r\n              className=\"text-gray-400 hover:text-red-400 transition-colors\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {selectedBranches.map(branch => (\r\n              <span\r\n                key={branch}\r\n                className=\"px-2 py-1 text-xs bg-blue-500/20 text-blue-400 rounded flex items-center gap-1\"\r\n              >\r\n                {branch}\r\n                <button\r\n                  onClick={() => toggleBranch(branch)}\r\n                  className=\"hover:text-red-400 transition-colors\"\r\n                >\r\n                  <X className=\"w-3 h-3\" />\r\n                </button>\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Branch list */}\r\n      <div className=\"space-y-2 max-h-80 overflow-y-auto\">\r\n        {loading ? (\r\n          <div className=\"text-center py-4 text-gray-500\">\r\n            <div className=\"animate-pulse\">Loading branches...</div>\r\n          </div>\r\n        ) : branches.length === 0 ? (\r\n          <div className=\"text-center py-4 text-gray-500\">\r\n            <GitBranch className=\"w-6 h-6 mx-auto mb-2 opacity-50\" />\r\n            <p>No branches found</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {displayedBranches.map(branch => (\r\n              <div\r\n                key={branch.name}\r\n                className={`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${\r\n                  selectedBranches.includes(branch.name)\r\n                    ? 'bg-blue-500/20 border-blue-500/50'\r\n                    : 'bg-gray-800/30 border-gray-700 hover:bg-gray-800/50'\r\n                }`}\r\n                onClick={() => toggleBranch(branch.name)}\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={`px-2 py-1 rounded text-xs border ${getBranchColor(branch.branch_type)}`}>\r\n                    {branch.branch_type}\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-medium text-gray-300\">{branch.name}</div>\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      {branch.commit_count} commits\r\n                      {branch.last_commit_date && ` â€¢ ${formatTimeAgo(branch.last_commit_date)}`}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className={`w-4 h-4 rounded border-2 flex items-center justify-center transition-all ${\r\n                  selectedBranches.includes(branch.name)\r\n                    ? 'bg-blue-500 border-blue-500'\r\n                    : 'border-gray-600 hover:border-gray-500'\r\n                }`}>\r\n                  {selectedBranches.includes(branch.name) && (\r\n                    <div className=\"w-2 h-2 bg-white rounded-full\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n            \r\n            {branches.length > 8 && (\r\n              <button\r\n                onClick={() => setShowAll(!showAll)}\r\n                className=\"w-full text-center py-2 text-sm text-gray-400 hover:text-gray-300 transition-colors\"\r\n              >\r\n                {showAll ? 'Show Less' : `Show All (${branches.length} branches)`}\r\n              </button>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatTimeAgo(dateString: string): string {\r\n  if (!dateString) return '';\r\n  \r\n  const date = new Date(dateString);\r\n  const now = new Date();\r\n  const diffTime = Math.abs(now.getTime() - date.getTime());\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n  \r\n  if (diffDays === 1) return '1d ago';\r\n  if (diffDays < 7) return `${diffDays}d ago`;\r\n  if (diffDays < 30) return `${Math.ceil(diffDays / 7)}w ago`;\r\n  if (diffDays < 365) return `${Math.ceil(diffDays / 30)}mo ago`;\r\n  return `${Math.ceil(diffDays / 365)}y ago`;\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1882, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/sidekick-pro/frontend/app/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useQuery, useMutation } from '@tanstack/react-query'\r\nimport { Search, Brain, Loader2, GitBranch } from 'lucide-react'\r\nimport { contextKeeperAPI, QueryResponse } from '../lib/api'\r\nimport { QueryResults } from '../components/QueryResults'\r\nimport { RepositoryList } from '../components/RepositoryList'\r\nimport { BranchSelector } from '../components/BranchSelector'\r\n\r\nexport default function Home() {\r\n  const [query, setQuery] = useState('')\r\n  const [selectedRepo, setSelectedRepo] = useState<string | null>(null)\r\n  const [selectedBranches, setSelectedBranches] = useState<string[]>([])\r\n\r\n  const { data: stats } = useQuery({\r\n    queryKey: ['stats'],\r\n    queryFn: contextKeeperAPI.getStats,\r\n  })\r\n\r\n  const { data: health } = useQuery({\r\n    queryKey: ['health'],\r\n    queryFn: contextKeeperAPI.getHealth,\r\n  })\r\n\r\n  const searchMutation = useMutation<QueryResponse, Error, string>({\r\n    mutationFn: (searchQuery: string) => \r\n      contextKeeperAPI.query(searchQuery, selectedRepo || undefined),\r\n  })\r\n\r\n  const handleSearch = () => {\r\n    if (query.trim()) {\r\n      searchMutation.mutate(query)\r\n    }\r\n  }\r\n\r\n  // Dynamic suggested queries based on selected branches\r\n  const getSuggestedQueries = () => {\r\n    const baseQueries = [\r\n      'Tell me about this codebase',\r\n      'What are the recent changes?',\r\n      'Show the latest commit',\r\n      'Explain the architecture'\r\n    ];\r\n\r\n    if (selectedBranches.length > 0) {\r\n      const branchSpecific = [\r\n        `What's happening on ${selectedBranches[0]} branch?`,\r\n        selectedBranches.includes('main') || selectedBranches.includes('master') \r\n          ? 'What was merged to main recently?' \r\n          : 'Show critical bug fixes',\r\n        selectedBranches.some(b => b.startsWith('feature/'))\r\n          ? 'Show feature development progress'\r\n          : 'Who has been most active?',\r\n        selectedBranches.length > 1 \r\n          ? 'Compare branches activity' \r\n          : 'Show recent commits'\r\n      ];\r\n      return branchSpecific;\r\n    }\r\n\r\n    return baseQueries;\r\n  };\r\n\r\n  const suggestedQueries = getSuggestedQueries();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-950\">\r\n      {/* Header */}\r\n      <header className=\"border-b border-gray-800\">\r\n        <div className=\"container mx-auto px-6 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-emerald-500/10 rounded-lg\">\r\n              <Brain className=\"w-6 h-6 text-emerald-400\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-semibold\">Context Keeper</h1>\r\n              <p className=\"text-sm text-gray-400\">AI Memory Layer for Development Teams</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"container mx-auto px-6 py-8 max-w-7xl\">\r\n\r\n        {/* Stats */}\r\n        <div className=\"grid grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6 text-center\">\r\n            <div className=\"text-2xl font-bold text-emerald-400\">\r\n              {stats?.events?.in_qdrant || 0}\r\n            </div>\r\n            <div className=\"text-sm text-gray-400 mt-1\">Total Commits</div>\r\n          </div>\r\n          <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6 text-center\">\r\n            <div className=\"text-2xl font-bold text-emerald-400\">\r\n              {stats?.repositories || 0}\r\n            </div>\r\n            <div className=\"text-sm text-gray-400 mt-1\">Repositories</div>\r\n          </div>\r\n          <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6 text-center\">\r\n            <div className=\"text-2xl font-bold\">\r\n              {health?.services?.ollama === 'healthy' ? \r\n                <span className=\"text-emerald-400\">Online</span> : \r\n                <span className=\"text-red-400\">Offline</span>\r\n              }\r\n            </div>\r\n            <div className=\"text-sm text-gray-400 mt-1\">AI Status</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Grid */}\r\n        <div className=\"grid lg:grid-cols-4 gap-6\">\r\n          {/* Left Sidebar - Repositories and Branches */}\r\n          <div className=\"lg:col-span-1 space-y-6\">\r\n            <RepositoryList \r\n              selectedRepo={selectedRepo}\r\n              onSelectRepo={setSelectedRepo}\r\n            />\r\n            \r\n            {/* Branch Selector */}\r\n            <BranchSelector\r\n              selectedRepository={selectedRepo}\r\n              selectedBranches={selectedBranches}\r\n              onBranchesChange={setSelectedBranches}\r\n            />\r\n          </div>\r\n\r\n          {/* Main Content Area */}\r\n          <div className=\"lg:col-span-3 space-y-6\">\r\n            {/* Search Section */}\r\n            <div className=\"bg-gray-900/50 border border-gray-800 rounded-2xl p-6\">\r\n              <div className=\"relative mb-6\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={query}\r\n                  onChange={(e) => setQuery(e.target.value)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') handleSearch()\r\n                  }}\r\n                  placeholder={selectedRepo \r\n                    ? `Ask anything about ${selectedRepo.split('/').pop()}...` \r\n                    : \"Select a repository and ask anything...\"\r\n                  }\r\n                  className=\"w-full px-4 py-3 pr-12 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-emerald-500 focus:outline-none transition-colors\"\r\n                  disabled={!selectedRepo}\r\n                />\r\n                <button\r\n                  onClick={handleSearch}\r\n                  disabled={searchMutation.isPending || !selectedRepo || !query.trim()}\r\n                  className=\"absolute right-2 top-2 p-2 text-emerald-400 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {searchMutation.isPending ? (\r\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                  ) : (\r\n                    <Search className=\"w-5 h-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              {/* Branch Context Display */}\r\n              {selectedBranches.length > 0 && (\r\n                <div className=\"flex items-center gap-2 mb-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\r\n                  <GitBranch className=\"w-4 h-4 text-blue-400\" />\r\n                  <span className=\"text-sm text-gray-400\">Filtering by:</span>\r\n                  <div className=\"flex gap-1 flex-wrap\">\r\n                    {selectedBranches.map(branch => (\r\n                      <span\r\n                        key={branch}\r\n                        className=\"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs border border-blue-500/30\"\r\n                      >\r\n                        {branch}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Suggested Queries */}\r\n              {selectedRepo && (\r\n                <div>\r\n                  <div className=\"text-sm text-gray-500 mb-3 flex items-center gap-2\">\r\n                    <span>ðŸ’¡ Try asking:</span>\r\n                    {selectedBranches.length > 0 && (\r\n                      <span className=\"text-xs text-blue-400\">\r\n                        (filtered by {selectedBranches.length} branch{selectedBranches.length > 1 ? 'es' : ''})\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    {suggestedQueries.map((sq, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => {\r\n                          setQuery(sq)\r\n                          searchMutation.mutate(sq)\r\n                        }}\r\n                        disabled={searchMutation.isPending}\r\n                        className=\"p-4 bg-gray-800/30 hover:bg-gray-800/50 border border-gray-700 hover:border-gray-600 rounded-xl text-left transition-all group disabled:opacity-50\"\r\n                      >\r\n                        <div className=\"flex items-start gap-2\">\r\n                          <span className=\"text-yellow-400 text-sm\">ðŸ’¡</span>\r\n                          <p className=\"text-sm text-gray-300 group-hover:text-white transition-colors\">\r\n                            {sq}\r\n                          </p>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Repository Selection Prompt */}\r\n              {!selectedRepo && (\r\n                <div className=\"text-center py-8\">\r\n                  <div className=\"bg-gray-800/30 border border-gray-700 rounded-xl p-6\">\r\n                    <Brain className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-300 mb-2\">\r\n                      Ready to Analyze Your Code\r\n                    </h3>\r\n                    <p className=\"text-gray-400 text-sm\">\r\n                      Select a repository from the sidebar to start querying your development history\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Query Results */}\r\n            {searchMutation.data && (\r\n              <QueryResults data={searchMutation.data} />\r\n            )}\r\n\r\n            {/* Error State */}\r\n            {searchMutation.error && (\r\n              <div className=\"bg-red-900/20 border border-red-800 rounded-2xl p-6\">\r\n                <h3 className=\"text-lg font-semibold text-red-400 mb-2\">Query Failed</h3>\r\n                <p className=\"text-red-300\">\r\n                  {searchMutation.error.message || 'An error occurred while processing your query'}\r\n                </p>\r\n                <button\r\n                  onClick={() => searchMutation.reset()}\r\n                  className=\"mt-3 text-sm text-red-400 hover:text-red-300 transition-colors\"\r\n                >\r\n                  Try again\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}